{"version":3,"sources":["webpack:///static/js/5.5e20a085de8df785d4d9.js","webpack:///./src/components/chat-noir.vue","webpack:///./src/components/chat-noir.vue?b084","webpack:///./src/components/chat-noir.vue?52e7","webpack:///./src/components/chat-noir.vue?4491","webpack:///./src/components/chat-noir.vue?8d6b"],"names":["webpackJsonp","30","module","exports","__webpack_require__","Component","39","__webpack_exports__","Object","defineProperty","value","name","data","radius","col","row","interval","block_num","showPath","showCoord","showInsight","lazyPath","step","revert","finish","cells","selected","cat","path","even","odd","bfs","dev","computed","width","this","height","transform","pixels","cell","key","ref","x","y","hex2key","caught","insight","status","pathText","coordText","insightText","created","init","activated","document","title","methods","point","create_cell","create_block","update_path","is_finish","draw_path","j","l","ref1","hex_key","blocked","cat_key","i","Math","trunc","random","toggle_path","toggle_coord","toggle_insight","a","hex_neighbor","array","forEach","_this","push","hex","z","point2hex","hex_border","out_of_hex","pick","num","keys","length","pow","lazy_next","unpick","next_path","pathy","JSON","parse","stringify","get_bfs","get_path","reset_path","get_goals","cost_so_far","distance","fn","split","sort","b","filter","maxMovement","breadth_first_search","goal","goals","p","round","came_from","reverse","next","shift","findIndex","setTimeout","type","index","results","start","fringes","k","len","len1","neighbor","neighbors","obj","obj1","start_key","49","version","sources","names","mappings","file","sourcesContent","sourceRoot","55","content","locals","61","render","_vm","_h","$createElement","_c","_self","attrs","id","domProps","textContent","_s","_v","staticClass","on","contextmenu","$event","preventDefault","_l","staticRenderFns"],"mappings":"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","file":"static/js/5.5e20a085de8df785d4d9.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 30:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(55)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(39),\n  /* template */\n  __webpack_require__(61),\n  /* scopeId */\n  \"data-v-c5e332d8\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 39:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\nvar m;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (m = {\n  name: 'chatnoir',\n  data: function() {\n    return {\n      radius: 24,\n      col: 11,\n      row: 11,\n      interval: 1.5,\n      block_num: 10,\n      showPath: false,\n      showCoord: false,\n      showInsight: false,\n      lazyPath: true,\n      step: 0,\n      revert: 0,\n      finish: null,\n      cells: {},\n      selected: {},\n      cat: {},\n      path: [],\n      even: [[1, -1], [1, 0], [1, 1], [0, 1], [-1, 0], [0, -1]],\n      odd: [[0, -1], [1, 0], [0, 1], [-1, 1], [-1, 0], [-1, -1]],\n      bfs: {},\n      dev: false\n    };\n  },\n  computed: {\n    width: function() {\n      return (this.radius + this.interval) * (this.col + 1) * 2;\n    },\n    height: function() {\n      return (this.radius + this.interval) * this.row * 2 * 0.9;\n    },\n    transform: function() {\n      return \"translate(\" + this.radius + \", \" + this.radius + \")\";\n    },\n    pixels: function() {\n      var cell, key, pixels, ref;\n      pixels = {};\n      ref = this.cells;\n      for (key in ref) {\n        cell = ref[key];\n        pixels[key] = {};\n        pixels[key].x = cell.x;\n        pixels[key].y = cell.y;\n        if (cell.selected) {\n          pixels[key].selected = true;\n        } else {\n          pixels[key].selected = false;\n        }\n        if (key === this.hex2key(this.cat)) {\n          pixels[key].caught = true;\n        } else {\n          pixels[key].caught = false;\n        }\n        if (this.showPath && cell.path) {\n          pixels[key].path = true;\n        } else {\n          pixels[key].path = false;\n        }\n        if (this.showInsight && cell.insight) {\n          pixels[key].insight = true;\n        } else {\n          pixels[key].insight = false;\n        }\n      }\n      return pixels;\n    },\n    status: function() {\n      switch (this.finish) {\n        case 'win':\n          return 'POOR CAT' + ' ' + this.step;\n        case 'lose':\n          return 'NEKO RUN';\n        default:\n          return 'Chat Noir' + ' ' + this.step;\n      }\n    },\n    pathText: function() {\n      if (this.showPath) {\n        return 'Hide Path';\n      } else {\n        return 'Show Path';\n      }\n    },\n    coordText: function() {\n      if (this.showCoord) {\n        return 'Hide Coord';\n      } else {\n        return 'Show Coord';\n      }\n    },\n    insightText: function() {\n      if (this.showInsight) {\n        return 'Hide Insight';\n      } else {\n        return 'Show Insight';\n      }\n    }\n  },\n  created: function() {\n    return this.init();\n  },\n  activated: function() {\n    return document.title = 'Chat Noir';\n  },\n  methods: {\n    init: function() {\n      this.cat = this.point(5, 5);\n      this.selected = {};\n      this.finish = null;\n      this.step = 0;\n      this.create_cell();\n      this.create_block();\n      this.update_path();\n      this.is_finish();\n      return this.draw_path();\n    },\n    create_cell: function() {\n      var cells, j, key, l, ref, ref1, x, y;\n      cells = {};\n      for (x = j = 0, ref = this.col; 0 <= ref ? j < ref : j > ref; x = 0 <= ref ? ++j : --j) {\n        for (y = l = 0, ref1 = this.row; 0 <= ref1 ? l < ref1 : l > ref1; y = 0 <= ref1 ? ++l : --l) {\n          key = this.hex_key(x, y);\n          cells[key] = this.point(x, y);\n          cells[key].selected = false;\n          cells[key].caught = false;\n          cells[key].path = false;\n          cells[key].insight = false;\n        }\n      }\n      return this.cells = cells;\n    },\n    create_block: function() {\n      var blocked, cat_key, i, key, x, y;\n      if (this.dev) {\n        return;\n      }\n      blocked = {};\n      i = 0;\n      cat_key = this.hex2key(this.cat);\n      while (i < this.block_num) {\n        x = Math.trunc(Math.random() * this.col);\n        y = Math.trunc(Math.random() * this.row);\n        key = this.hex_key(x, y);\n        if (key !== cat_key && !this.cells[key].selected) {\n          blocked[key] = this.point(x, y);\n          this.cells[key].selected = true;\n          i++;\n        }\n      }\n      return this.selected = blocked;\n    },\n    toggle_path: function() {\n      return this.showPath = !this.showPath;\n    },\n    toggle_coord: function() {\n      return this.showCoord = !this.showCoord;\n    },\n    toggle_insight: function() {\n      return this.showInsight = !this.showInsight;\n    },\n    hex_key: function(x, y) {\n      return x + '-' + y;\n    },\n    hex2key: function(a) {\n      return this.hex_key(a.x, a.y);\n    },\n    hex_neighbor: function(x, y) {\n      var array;\n      array = [];\n      if (y & 1) {\n        this.even.forEach((function(_this) {\n          return function(a) {\n            return array.push(_this.point(a[0] + x, a[1] + y));\n          };\n        })(this));\n      } else {\n        this.odd.forEach((function(_this) {\n          return function(a) {\n            return array.push(_this.point(a[0] + x, a[1] + y));\n          };\n        })(this));\n      }\n      return array;\n    },\n    point: function(x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    },\n    hex: function(x, y, z) {\n      return {\n        x: x,\n        y: y,\n        z: z\n      };\n    },\n    point2hex: function(x, y) {\n      return this.hex(x, y, 1 - x - y);\n    },\n    hex_border: function(cell) {\n      return cell.x === 0 || cell.y === 0 || cell.x === this.col - 1 || cell.y === this.row - 1;\n    },\n    out_of_hex: function(cell) {\n      return cell.x < 0 || cell.y < 0 || cell.x > this.col - 1 || cell.y > this.row - 1;\n    },\n    pick: function(x, y) {\n      var cell, key, num, random;\n      if (this.finish) {\n        return;\n      }\n      key = this.hex_key(x, y);\n      cell = this.point(x, y);\n      this.selected[key] = cell;\n      this.cells[key].selected = true;\n      if (!this.dev) {\n        this.step += 1;\n        return this.lazy_next(cell);\n      } else {\n        num = Object.keys(this.selected).length;\n        random = Math.random();\n        if (random < Math.pow(2, num - this.block_num)) {\n          this.step += 1;\n          return this.lazy_next(cell);\n        }\n      }\n    },\n    unpick: function(x, y) {\n      var cell, key;\n      if (this.finish) {\n        this.finish = null;\n      }\n      key = this.hex_key(x, y);\n      cell = this.point(x, y);\n      this.selected[key] = null;\n      this.cells[key].selected = false;\n      this.revert += 1;\n      return this.update_path();\n    },\n    next_path: function(x, y, pathy) {\n      var bfs, blocked, cell, key, path;\n      if (this.finish || !this.showInsight) {\n        return;\n      }\n      if (this.lazyPath && !pathy) {\n\n      } else {\n        key = this.hex_key(x, y);\n        cell = this.point(x, y);\n        blocked = JSON.parse(JSON.stringify(this.selected));\n        if (!blocked[key]) {\n          blocked[key] = cell;\n        }\n        bfs = this.get_bfs(null, blocked);\n        path = this.get_path(bfs);\n        return this.draw_path(path, 'insight');\n      }\n    },\n    reset_path: function(pathy) {\n      if (this.lazyPath && pathy) {\n        return this.draw_path(this.path, 'insight');\n      }\n    },\n    get_goals: function(cost_so_far) {\n      var array, distance, fn, key, value;\n      array = [];\n      distance = null;\n      fn = (function(_this) {\n        return function(key) {\n          var cell, x, y;\n          x = ~~key.split('-')[0];\n          y = ~~key.split('-')[1];\n          cell = _this.point(x, y);\n          if (_this.hex_border(cell)) {\n            cell.distance = value;\n            array.push(cell);\n            if ((distance == null) || distance > cell.distance) {\n              return distance = cell.distance;\n            }\n          }\n        };\n      })(this);\n      for (key in cost_so_far) {\n        value = cost_so_far[key];\n        fn(key);\n      }\n      array.sort(function(a, b) {\n        return a.distance - b.distance;\n      });\n      return array.filter(function(a) {\n        return a.distance === distance;\n      });\n    },\n    get_bfs: function(maxMovement, blocked) {\n      if (!maxMovement) {\n        maxMovement = (this.col + 1) * (this.row + 1);\n      }\n      if (!blocked) {\n        blocked = this.selected;\n      }\n      return this.breadth_first_search(this.cat, maxMovement, blocked);\n    },\n    get_path: function(bfs) {\n      var goal, goals, p, path, random;\n      path = [];\n      goals = this.get_goals(bfs.cost_so_far);\n      random = Math.round(Math.random() * (goals.length - 1));\n      goal = goals[random];\n      p = goal;\n      while (p && this.hex2key(p) !== this.hex2key(this.cat)) {\n        path.push(p);\n        p = bfs.came_from[this.hex2key(p)];\n      }\n      return path.reverse();\n    },\n    update_path: function() {\n      var bfs, path;\n      bfs = this.get_bfs(null, this.selected);\n      path = this.get_path(bfs);\n      this.bfs = bfs;\n      return this.path = path;\n    },\n    next: function() {\n      var cat;\n      if (!this.finish) {\n        cat = this.path.shift();\n        this.cells[this.hex2key(this.cat)].caught = false;\n        this.cells[this.hex2key(cat)].caught = true;\n        this.cat = cat;\n        this.is_finish();\n      }\n      return this.draw_path();\n    },\n    lazy_next: function(cell) {\n      var index;\n      if (this.lazyPath && cell) {\n        index = this.path.findIndex(function(p) {\n          return p.x === cell.x && p.y === cell.y;\n        });\n        if (index !== -1) {\n          this.update_path();\n          this.is_finish();\n        }\n      }\n      return this.next();\n    },\n    is_finish: function() {\n      if (this.hex_border(this.cat)) {\n        this.finish = 'lose';\n      } else if (this.path.length === 0) {\n        this.finish = 'win';\n      }\n      if (this.finish) {\n        return setTimeout((function(_this) {\n          return function() {\n            return _this.init();\n          };\n        })(this), 2000);\n      }\n    },\n    draw_path: function(path, type) {\n      var cell, index, key, ref, results;\n      if (!path) {\n        path = this.path;\n      }\n      if (!type) {\n        type = 'path';\n      }\n      ref = this.cells;\n      results = [];\n      for (key in ref) {\n        cell = ref[key];\n        index = path.findIndex(function(p) {\n          return p.x === cell.x && p.y === cell.y;\n        });\n        if (index !== -1) {\n          results.push(cell[type] = true);\n        } else {\n          results.push(cell[type] = false);\n        }\n      }\n      return results;\n    },\n    breadth_first_search: function(start, maxMovement, blocked) {\n      var came_from, cell, cost_so_far, fringes, j, k, key, l, len, len1, neighbor, neighbors, obj, obj1, ref, start_key;\n      start_key = this.hex2key(start);\n      cost_so_far = (\n        obj = {},\n        obj[\"\" + start_key] = 0,\n        obj\n      );\n      came_from = (\n        obj1 = {},\n        obj1[\"\" + start_key] = null,\n        obj1\n      );\n      fringes = [[start]];\n      k = 0;\n      while (k < maxMovement && fringes[k].length > 0) {\n        fringes[k + 1] = [];\n        ref = fringes[k];\n        for (j = 0, len = ref.length; j < len; j++) {\n          cell = ref[j];\n          neighbors = this.hex_neighbor(cell.x, cell.y);\n          for (l = 0, len1 = neighbors.length; l < len1; l++) {\n            neighbor = neighbors[l];\n            key = this.hex2key(neighbor);\n            if (!cost_so_far[key] && !blocked[key] && !this.out_of_hex(neighbor)) {\n              cost_so_far[key] = k + 1;\n              came_from[key] = cell;\n              fringes[k + 1].push(neighbor);\n            }\n          }\n        }\n        k++;\n      }\n      return {\n        cost_so_far: cost_so_far,\n        came_from: came_from\n      };\n    }\n  }\n});\n\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(27)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"div.action[data-v-c5e332d8]{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;-ms-flex-direction:row;flex-direction:row;margin:0 2.5rem 1rem 0}div.action[data-v-c5e332d8],div.board[data-v-c5e332d8]{display:-ms-flexbox;display:flex;justify-content:center}div.board[data-v-c5e332d8]{-ms-flex:auto;flex:auto;-ms-flex-pack:center;margin:0 0 0 2rem;user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none}button[data-v-c5e332d8]{height:2rem;min-width:6rem;border:none;cursor:pointer;background:#c6ff00;margin:0 1rem}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/ding/Documents/GitHub/Aha/src/components/chat-noir.vue\"],\"names\":[],\"mappings\":\"AACA,4BAGE,sBAAuB,AACnB,mBAAoB,AACxB,qBAAsB,AAEtB,uBAAwB,AACpB,mBAAoB,AACxB,sBAAwB,CACzB,AACD,uDAVE,oBAAqB,AACrB,aAAc,AAIV,sBAAwB,CAkB7B,AAbD,2BAGE,cAAe,AACX,UAAW,AACf,qBAAsB,AAEtB,kBAAmB,AACnB,iBAAkB,AAClB,sBAAuB,AACvB,qBAAsB,AACtB,oBAAqB,AACrB,wBAA0B,CAC3B,AAUD,wBACE,YAAa,AACb,eAAgB,AAChB,YAAa,AACb,eAAgB,AAChB,mBAAoB,AACpB,aAAe,CAChB\",\"file\":\"chat-noir.vue\",\"sourcesContent\":[\"\\ndiv.action[data-v-c5e332d8] {\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -ms-flex-align: center;\\r\\n      align-items: center;\\r\\n  -ms-flex-pack: center;\\r\\n      justify-content: center;\\r\\n  -ms-flex-direction: row;\\r\\n      flex-direction: row;\\r\\n  margin: 0 2.5rem 1rem 0;\\n}\\ndiv.board[data-v-c5e332d8] {\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -ms-flex: auto;\\r\\n      flex: auto;\\r\\n  -ms-flex-pack: center;\\r\\n      justify-content: center;\\r\\n  margin: 0 0 0 2rem;\\r\\n  user-select: none;\\r\\n  -moz-user-select: none;\\r\\n  -ms-user-select: none;\\r\\n  -o-user-select: none;\\r\\n  -webkit-user-select: none;\\n}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n/*\\r\\ndiv.action > div {\\r\\n  margin: 0 3rem 0 0;\\r\\n}\\r\\n*/\\nbutton[data-v-c5e332d8] {\\r\\n  height: 2rem;\\r\\n  min-width: 6rem;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n  background: #c6ff00;\\r\\n  margin: 0 1rem;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 55:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(49);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(28)(\"0286fec2\", content, true);\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"chatnoir\"\n    }\n  }, [_c('h2', {\n    domProps: {\n      \"textContent\": _vm._s(_vm.status)\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"board\"\n  }, [_c('svg', {\n    attrs: {\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    },\n    on: {\n      \"contextmenu\": function($event) {\n        $event.preventDefault();\n      }\n    }\n  }, [_c('g', {\n    attrs: {\n      \"transform\": _vm.transform\n    }\n  }, _vm._l((_vm.pixels), function(cell, key) {\n    return _c('aha-hexagon', {\n      key: key,\n      attrs: {\n        \"cell\": cell,\n        \"showCoord\": _vm.showCoord,\n        \"radius\": _vm.radius,\n        \"interval\": _vm.interval\n      }\n    })\n  }))])])])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.5e20a085de8df785d4d9.js","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-c5e332d8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./chat-noir.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!coffee-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./chat-noir.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c5e332d8\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./chat-noir.vue\"),\n  /* scopeId */\n  \"data-v-c5e332d8\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/chat-noir.vue\n// module id = 30\n// module chunks = 5","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nexport default m =\r\n  name: 'chatnoir'\r\n  data: ->\r\n    #config\r\n    radius: 24 #cell半径\r\n    col: 11 #cell列数\r\n    row: 11 #cell行数\r\n    interval: 1.5 #cell间距, CSS即可，没什么更改的意义\r\n    block_num: 10 #起始block数目\r\n    showPath: false\r\n    showCoord: false\r\n    showInsight: false\r\n    lazyPath: true #是否寻找新的path，如果新pick的点不在原本的path上。没什么用\r\n\r\n    step: 0 #pick的次数，走的步数\r\n    revert: 0\r\n    finish: null\r\n    cells: {} #所有的cell集合\r\n    selected: {} #selected的cell集合\r\n    cat: {} #cat所在cell\r\n    path: [] #cat的行动路线\r\n\r\n    #用来计算cell的neighbor\r\n    even: [\r\n      [1, -1], [1, 0], [1, 1], [0, 1], [-1, 0], [0, -1]\r\n    ]\r\n    odd: [\r\n      [0, -1], [1, 0], [0, 1], [-1, 1], [-1, 0], [-1, -1]\r\n    ]\r\n\r\n    #dev only\r\n    bfs: {}\r\n    dev: false\r\n\r\n  computed:\r\n    width: ->\r\n      (@radius + @interval) * (@col + 1) * 2\r\n\r\n    height: ->\r\n      (@radius + @interval) * @row * 2 * 0.9\r\n\r\n    transform: -> \"translate(#{@radius}, #{@radius})\"\r\n\r\n    pixels: ->\r\n      pixels = {}\r\n      for key, cell of @cells\r\n        pixels[key] = {}\r\n        pixels[key].x = cell.x\r\n        pixels[key].y = cell.y\r\n        if cell.selected\r\n          pixels[key].selected = true\r\n        else\r\n          pixels[key].selected = false\r\n        if key == @hex2key(@cat)\r\n          pixels[key].caught = true\r\n        else\r\n          pixels[key].caught = false\r\n        if @showPath && cell.path\r\n          pixels[key].path = true\r\n        else\r\n          pixels[key].path = false\r\n        if @showInsight && cell.insight\r\n          pixels[key].insight = true\r\n        else\r\n          pixels[key].insight = false\r\n      pixels\r\n\r\n    status: ->\r\n      switch @finish\r\n        when 'win'\r\n          'POOR CAT' + ' ' + @step\r\n        when 'lose'\r\n          'NEKO RUN'\r\n        else\r\n          'Chat Noir' + ' ' + @step\r\n\r\n    pathText: ->\r\n      if @showPath\r\n        'Hide Path'\r\n      else\r\n        'Show Path'\r\n\r\n    coordText: ->\r\n      if @showCoord\r\n        'Hide Coord'\r\n      else\r\n        'Show Coord'\r\n\r\n    insightText: ->\r\n      if @showInsight\r\n        'Hide Insight'\r\n      else\r\n        'Show Insight'\r\n\r\n  created: ->\r\n    @init()\r\n\r\n  activated: ->\r\n    # console.log 'activated'\r\n    document.title = 'Chat Noir'\r\n\r\n  methods:\r\n    init: ->\r\n      @cat = @point 5, 5\r\n      @selected = {}\r\n      @finish = null\r\n      @step = 0\r\n      @create_cell()\r\n      @create_block()\r\n      @update_path()\r\n      @is_finish()\r\n      @draw_path()\r\n\r\n    create_cell: ->\r\n      cells = {}\r\n      for x in [0...@col]\r\n        for y in [0...@row]\r\n          key = @hex_key x, y\r\n          cells[key] = @point x, y\r\n          cells[key].selected = false\r\n          cells[key].caught = false\r\n          cells[key].path = false\r\n          cells[key].insight = false\r\n      @cells = cells\r\n\r\n    create_block: ->\r\n      if @dev then return\r\n      blocked = {}\r\n      i = 0\r\n      cat_key = @hex2key @cat\r\n      while i < @block_num\r\n        x = Math.trunc Math.random()*@col\r\n        y = Math.trunc Math.random()*@row\r\n        key = @hex_key x, y\r\n        if key != cat_key && !@cells[key].selected\r\n          blocked[key] = @point x, y\r\n          @cells[key].selected = true\r\n          i++\r\n      @selected = blocked\r\n\r\n    toggle_path: ->\r\n      @showPath = !@showPath\r\n\r\n    toggle_coord: ->\r\n      @showCoord = !@showCoord\r\n\r\n    toggle_insight: ->\r\n      @showInsight = !@showInsight\r\n\r\n    hex_key: (x, y) ->\r\n      x + '-' + y\r\n\r\n    hex2key: (a) ->\r\n      @hex_key a.x, a.y\r\n\r\n    hex_neighbor: (x, y) ->\r\n      array = []\r\n      if (y&1)\r\n        @even.forEach (a) =>\r\n          array.push @point a[0]+x, a[1]+y\r\n      else\r\n        @odd.forEach (a) =>\r\n          array.push @point a[0]+x, a[1]+y\r\n      array\r\n\r\n    point: (x, y) ->\r\n      x: x, y: y\r\n\r\n    hex: (x, y, z) ->\r\n      x: x, y: y, z: z\r\n\r\n    point2hex: (x, y) ->\r\n      @hex x, y, 1-x-y\r\n\r\n    hex_border: (cell) ->\r\n      cell.x == 0 || cell.y == 0 || cell.x == @col-1 || cell.y == @row-1\r\n\r\n    out_of_hex: (cell) ->\r\n      cell.x < 0 || cell.y < 0 || cell.x > @col-1 || cell.y > @row-1\r\n\r\n    pick: (x, y) ->\r\n      if @finish then return\r\n      # console.log x, y\r\n      key = @hex_key x, y\r\n      cell = @point x, y\r\n      @selected[key] = cell\r\n      @cells[key].selected = true\r\n      if !@dev\r\n        @step += 1\r\n        @lazy_next cell\r\n      else\r\n        num = Object.keys(@selected).length\r\n        random = Math.random()\r\n        if random < Math.pow 2, num - @block_num\r\n          @step += 1\r\n          @lazy_next cell\r\n\r\n    unpick: (x, y) ->\r\n      if @finish\r\n        @finish = null\r\n      # console.log x, y\r\n      key = @hex_key x, y\r\n      cell = @point x, y\r\n      @selected[key] = null\r\n      @cells[key].selected = false\r\n      @revert += 1\r\n      @update_path()\r\n      # @is_finish()\r\n      # @next()\r\n\r\n\r\n    next_path: (x, y, pathy) ->\r\n      if @finish || !@showInsight then return\r\n      if @lazyPath && !pathy\r\n        #只需在mouseout时运行一次\r\n        return\r\n        #@draw_path @path, 'insight'\r\n      else\r\n        key = @hex_key x, y\r\n        cell = @point x, y\r\n        blocked = JSON.parse JSON.stringify @selected\r\n        if !blocked[key]\r\n          blocked[key] = cell\r\n        bfs = @get_bfs null, blocked\r\n        path = @get_path bfs\r\n        @draw_path path, 'insight'\r\n\r\n    reset_path: (pathy) ->\r\n      if @lazyPath && pathy\r\n        @draw_path @path, 'insight'\r\n\r\n    get_goals: (cost_so_far) ->\r\n      array = []\r\n      #先找出边界cell, 需要更简单的code\r\n      distance = null\r\n      for key, value of cost_so_far\r\n        do (key) =>\r\n          x = ~~key.split('-')[0]\r\n          y = ~~key.split('-')[1]\r\n          cell = @point x, y\r\n          if @hex_border cell\r\n            cell.distance = value\r\n            array.push cell\r\n            if !distance? || distance > cell.distance\r\n              distance = cell.distance\r\n      #根据cell的距离排序，然后选取距离最短的cells\r\n      array.sort (a, b) -> a.distance - b.distance\r\n      #distance = array[0].distance\r\n      array.filter (a) -> a.distance == distance\r\n\r\n    get_bfs: (maxMovement, blocked) ->\r\n      if !maxMovement\r\n        maxMovement = (@col + 1) * (@row + 1)\r\n      if !blocked\r\n        blocked = @selected\r\n      @breadth_first_search @cat, maxMovement, blocked\r\n\r\n    get_path: (bfs) ->\r\n      path = []\r\n      goals = @get_goals bfs.cost_so_far\r\n      #选取goals中的一个作为路径的终点，这儿选的是第一个\r\n      random = Math.round Math.random() * (goals.length - 1)\r\n      goal = goals[random]\r\n      #从终点到起点cat的路径\r\n      p = goal\r\n      while p && @hex2key(p) != @hex2key(@cat)\r\n        path.push p\r\n        p = bfs.came_from[@hex2key(p)]\r\n      #反转path，这样path的第一个就是cat的下一步\r\n      path.reverse()\r\n\r\n    update_path: ->\r\n      bfs = @get_bfs null, @selected\r\n      path = @get_path bfs\r\n      @bfs = bfs\r\n      @path = path\r\n\r\n    #移动cat到下一个cell\r\n    next: ->\r\n      if !@finish\r\n        cat = @path.shift()\r\n        @cells[@hex2key(@cat)].caught = false\r\n        @cells[@hex2key(cat)].caught = true\r\n        @cat = cat\r\n        @is_finish()\r\n      @draw_path()\r\n\r\n    lazy_next: (cell) ->\r\n      if @lazyPath && cell\r\n        #pick不会导致路径变短。新pick的点如果不在之前计算的path上，此path依然是最短的，不用重新计算。\r\n        index = @path.findIndex (p) -> p.x == cell.x && p.y == cell.y\r\n        if index != -1\r\n          @update_path()\r\n          @is_finish()\r\n      @next()\r\n\r\n    is_finish: ->\r\n      #必须先判断输，再判断赢\r\n      if @hex_border @cat\r\n        @finish = 'lose'\r\n      else if @path.length == 0\r\n        @finish = 'win'\r\n      if @finish\r\n        setTimeout =>\r\n          @init()\r\n        , 2000\r\n\r\n    draw_path: (path, type)->\r\n      if !path\r\n        path = @path\r\n      if !type\r\n        type = 'path'\r\n      for key, cell of @cells\r\n        index = path.findIndex (p) -> p.x == cell.x && p.y == cell.y\r\n        if index != -1\r\n          cell[type] = true\r\n        else\r\n          cell[type] = false\r\n\r\n    breadth_first_search: (start, maxMovement, blocked) ->\r\n      start_key = @hex2key start\r\n      cost_so_far =\r\n        \"#{start_key}\": 0\r\n      came_from =\r\n        \"#{start_key}\": null\r\n      fringes = [ [ start ] ]\r\n      k = 0\r\n      while k < maxMovement && fringes[k].length > 0\r\n        fringes[k + 1] = []\r\n        for cell in fringes[k]\r\n          neighbors = @hex_neighbor cell.x, cell.y\r\n          for neighbor in neighbors\r\n            key = @hex2key neighbor\r\n            if !cost_so_far[key] && !blocked[key] && !@out_of_hex neighbor\r\n              cost_so_far[key] = k + 1\r\n              came_from[key] = cell\r\n              fringes[k + 1].push neighbor\r\n        k++\r\n      cost_so_far: cost_so_far\r\n      came_from: came_from\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vue-loader/lib/selector.js?type=script&index=0!./src/components/chat-noir.vue","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"div.action[data-v-c5e332d8]{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;-ms-flex-direction:row;flex-direction:row;margin:0 2.5rem 1rem 0}div.action[data-v-c5e332d8],div.board[data-v-c5e332d8]{display:-ms-flexbox;display:flex;justify-content:center}div.board[data-v-c5e332d8]{-ms-flex:auto;flex:auto;-ms-flex-pack:center;margin:0 0 0 2rem;user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none}button[data-v-c5e332d8]{height:2rem;min-width:6rem;border:none;cursor:pointer;background:#c6ff00;margin:0 1rem}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/ding/Documents/GitHub/Aha/src/components/chat-noir.vue\"],\"names\":[],\"mappings\":\"AACA,4BAGE,sBAAuB,AACnB,mBAAoB,AACxB,qBAAsB,AAEtB,uBAAwB,AACpB,mBAAoB,AACxB,sBAAwB,CACzB,AACD,uDAVE,oBAAqB,AACrB,aAAc,AAIV,sBAAwB,CAkB7B,AAbD,2BAGE,cAAe,AACX,UAAW,AACf,qBAAsB,AAEtB,kBAAmB,AACnB,iBAAkB,AAClB,sBAAuB,AACvB,qBAAsB,AACtB,oBAAqB,AACrB,wBAA0B,CAC3B,AAUD,wBACE,YAAa,AACb,eAAgB,AAChB,YAAa,AACb,eAAgB,AAChB,mBAAoB,AACpB,aAAe,CAChB\",\"file\":\"chat-noir.vue\",\"sourcesContent\":[\"\\ndiv.action[data-v-c5e332d8] {\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -ms-flex-align: center;\\r\\n      align-items: center;\\r\\n  -ms-flex-pack: center;\\r\\n      justify-content: center;\\r\\n  -ms-flex-direction: row;\\r\\n      flex-direction: row;\\r\\n  margin: 0 2.5rem 1rem 0;\\n}\\ndiv.board[data-v-c5e332d8] {\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -ms-flex: auto;\\r\\n      flex: auto;\\r\\n  -ms-flex-pack: center;\\r\\n      justify-content: center;\\r\\n  margin: 0 0 0 2rem;\\r\\n  user-select: none;\\r\\n  -moz-user-select: none;\\r\\n  -ms-user-select: none;\\r\\n  -o-user-select: none;\\r\\n  -webkit-user-select: none;\\n}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n/*\\r\\ndiv.action > div {\\r\\n  margin: 0 3rem 0 0;\\r\\n}\\r\\n*/\\nbutton[data-v-c5e332d8] {\\r\\n  height: 2rem;\\r\\n  min-width: 6rem;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n  background: #c6ff00;\\r\\n  margin: 0 1rem;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-c5e332d8\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/chat-noir.vue\n// module id = 49\n// module chunks = 5","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-c5e332d8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./chat-noir.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"0286fec2\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-c5e332d8\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/chat-noir.vue\n// module id = 55\n// module chunks = 5","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"chatnoir\"\n    }\n  }, [_c('h2', {\n    domProps: {\n      \"textContent\": _vm._s(_vm.status)\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"board\"\n  }, [_c('svg', {\n    attrs: {\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    },\n    on: {\n      \"contextmenu\": function($event) {\n        $event.preventDefault();\n      }\n    }\n  }, [_c('g', {\n    attrs: {\n      \"transform\": _vm.transform\n    }\n  }, _vm._l((_vm.pixels), function(cell, key) {\n    return _c('aha-hexagon', {\n      key: key,\n      attrs: {\n        \"cell\": cell,\n        \"showCoord\": _vm.showCoord,\n        \"radius\": _vm.radius,\n        \"interval\": _vm.interval\n      }\n    })\n  }))])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-c5e332d8\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/chat-noir.vue\n// module id = 61\n// module chunks = 5"],"sourceRoot":""}