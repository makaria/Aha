webpackJsonp([3],{30:function(t,e,n){n(44);var i=n(0)(n(35),n(49),"data-v-1cead8d4",null);t.exports=i.exports},35:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={name:"chatnoir",data:function(){return{radius:24,col:11,row:11,interval:1.5,block_num:10,showPath:!1,showCoord:!1,showInsight:!1,lazyPath:!0,step:0,revert:0,finish:null,cells:{},selected:{},cat:{},path:[],even:[[1,-1],[1,0],[1,1],[0,1],[-1,0],[0,-1]],odd:[[0,-1],[1,0],[0,1],[-1,1],[-1,0],[-1,-1]],bfs:{},dev:!1}},computed:{width:function(){return(this.radius+this.interval)*(this.col+1)*2},height:function(){return(this.radius+this.interval)*this.row*2*.9},transform:function(){return"translate("+this.radius+", "+this.radius+")"},pixels:function(){var t,e,n,i;n={},i=this.cells;for(e in i)t=i[e],n[e]={},n[e].x=t.x,n[e].y=t.y,t.selected?n[e].selected=!0:n[e].selected=!1,e===this.hex2key(this.cat)?n[e].caught=!0:n[e].caught=!1,this.showPath&&t.path?n[e].path=!0:n[e].path=!1,this.showInsight&&t.insight?n[e].insight=!0:n[e].insight=!1;return n},status:function(){switch(this.finish){case"win":return"POOR CAT "+this.step;case"lose":return"NEKO RUN";default:return"Chat Noir "+this.step}},pathText:function(){return this.showPath?"Hide Path":"Show Path"},coordText:function(){return this.showCoord?"Hide Coord":"Show Coord"},insightText:function(){return this.showInsight?"Hide Insight":"Show Insight"}},created:function(){return this.init()},activated:function(){return document.title="Chat Noir"},methods:{init:function(){return this.cat=this.point(5,5),this.selected={},this.finish=null,this.step=0,this.create_cell(),this.create_block(),this.update_path(),this.is_finish(),this.draw_path()},create_cell:function(){var t,e,n,i,s,h,r,o;for(t={},r=e=0,s=this.col;0<=s?e<s:e>s;r=0<=s?++e:--e)for(o=i=0,h=this.row;0<=h?i<h:i>h;o=0<=h?++i:--i)n=this.hex_key(r,o),t[n]=this.point(r,o),t[n].selected=!1,t[n].caught=!1,t[n].path=!1,t[n].insight=!1;return this.cells=t},create_block:function(){var t,e,n,i,s,h;if(!this.dev){for(t={},n=0,e=this.hex2key(this.cat);n<this.block_num;)s=Math.trunc(Math.random()*this.col),h=Math.trunc(Math.random()*this.row),(i=this.hex_key(s,h))===e||this.cells[i].selected||(t[i]=this.point(s,h),this.cells[i].selected=!0,n++);return this.selected=t}},toggle_path:function(){return this.showPath=!this.showPath},toggle_coord:function(){return this.showCoord=!this.showCoord},toggle_insight:function(){return this.showInsight=!this.showInsight},hex_key:function(t,e){return t+"-"+e},hex2key:function(t){return this.hex_key(t.x,t.y)},hex_neighbor:function(t,e){var n;return n=[],1&e?this.even.forEach(function(i){return function(s){return n.push(i.point(s[0]+t,s[1]+e))}}(this)):this.odd.forEach(function(i){return function(s){return n.push(i.point(s[0]+t,s[1]+e))}}(this)),n},point:function(t,e){return{x:t,y:e}},hex:function(t,e,n){return{x:t,y:e,z:n}},point2hex:function(t,e){return this.hex(t,e,1-t-e)},hex_border:function(t){return 0===t.x||0===t.y||t.x===this.col-1||t.y===this.row-1},out_of_hex:function(t){return t.x<0||t.y<0||t.x>this.col-1||t.y>this.row-1},pick:function(t,e){var n,i,s;if(!this.finish)return i=this.hex_key(t,e),n=this.point(t,e),this.selected[i]=n,this.cells[i].selected=!0,this.dev?(s=Object.keys(this.selected).length,Math.random()<Math.pow(2,s-this.block_num)?(this.step+=1,this.lazy_next(n)):void 0):(this.step+=1,this.lazy_next(n))},unpick:function(t,e){var n;return this.finish&&(this.finish=null),n=this.hex_key(t,e),this.point(t,e),this.selected[n]=null,this.cells[n].selected=!1,this.revert+=1,this.update_path()},next_path:function(t,e,n){var i,s,h,r,o;if(!this.finish&&this.showInsight)return!this.lazyPath||n?(r=this.hex_key(t,e),h=this.point(t,e),s=JSON.parse(JSON.stringify(this.selected)),s[r]||(s[r]=h),i=this.get_bfs(null,s),o=this.get_path(i),this.draw_path(o,"insight")):void 0},reset_path:function(t){if(this.lazyPath&&t)return this.draw_path(this.path,"insight")},get_goals:function(t){var e,n,i,s,h;e=[],n=null,i=function(t){return function(i){var s,r,o;if(r=~~i.split("-")[0],o=~~i.split("-")[1],s=t.point(r,o),t.hex_border(s)&&(s.distance=h,e.push(s),null==n||n>s.distance))return n=s.distance}}(this);for(s in t)h=t[s],i(s);return e.sort(function(t,e){return t.distance-e.distance}),e.filter(function(t){return t.distance===n})},get_bfs:function(t,e){return t||(t=(this.col+1)*(this.row+1)),e||(e=this.selected),this.breadth_first_search(this.cat,t,e)},get_path:function(t){var e,n,i,s,h;for(s=[],n=this.get_goals(t.cost_so_far),h=Math.round(Math.random()*(n.length-1)),e=n[h],i=e;i&&this.hex2key(i)!==this.hex2key(this.cat);)s.push(i),i=t.came_from[this.hex2key(i)];return s.reverse()},update_path:function(){var t,e;return t=this.get_bfs(null,this.selected),e=this.get_path(t),this.bfs=t,this.path=e},next:function(){var t;return this.finish||(t=this.path.shift(),this.cells[this.hex2key(this.cat)].caught=!1,this.cells[this.hex2key(t)].caught=!0,this.cat=t,this.is_finish()),this.draw_path()},lazy_next:function(t){return this.lazyPath&&t&&-1!==this.path.findIndex(function(e){return e.x===t.x&&e.y===t.y})&&(this.update_path(),this.is_finish()),this.next()},is_finish:function(){if(this.hex_border(this.cat)?this.finish="lose":0===this.path.length&&(this.finish="win"),this.finish)return setTimeout(function(t){return function(){return t.init()}}(this),2e3)},draw_path:function(t,e){var n,i,s,h,r;t||(t=this.path),e||(e="path"),h=this.cells,r=[];for(s in h)n=h[s],i=t.findIndex(function(t){return t.x===n.x&&t.y===n.y}),-1!==i?r.push(n[e]=!0):r.push(n[e]=!1);return r},breadth_first_search:function(t,e,n){var i,s,h,r,o,a,c,u,l,d,f,A,p,x,g,m;for(m=this.hex2key(t),p={},p[""+m]=0,h=p,x={},x[""+m]=null,i=x,r=[[t]],a=0;a<e&&r[a].length>0;){for(r[a+1]=[],g=r[a],o=0,l=g.length;o<l;o++)for(s=g[o],A=this.hex_neighbor(s.x,s.y),u=0,d=A.length;u<d;u++)f=A[u],c=this.hex2key(f),h[c]||n[c]||this.out_of_hex(f)||(h[c]=a+1,i[c]=s,r[a+1].push(f));a++}return{cost_so_far:h,came_from:i}}}}},40:function(t,e,n){e=t.exports=n(28)(!0),e.push([t.i,"div.action[data-v-1cead8d4]{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;-ms-flex-direction:row;flex-direction:row;margin:0 2.5rem 1rem 0}div.action[data-v-1cead8d4],div.board[data-v-1cead8d4]{display:-ms-flexbox;display:flex;justify-content:center}div.board[data-v-1cead8d4]{-ms-flex:auto;flex:auto;-ms-flex-pack:center;margin:0 0 0 2rem;user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none}button[data-v-1cead8d4]{height:2rem;min-width:6rem;border:none;cursor:pointer;background:#c6ff00;margin:0 1rem}","",{version:3,sources:["C:/Users/ding/Documents/GitHub/Aha/src/pages/chat-noir.vue"],names:[],mappings:"AACA,4BAGE,sBAAuB,AACnB,mBAAoB,AACxB,qBAAsB,AAEtB,uBAAwB,AACpB,mBAAoB,AACxB,sBAAwB,CACzB,AACD,uDAVE,oBAAqB,AACrB,aAAc,AAIV,sBAAwB,CAkB7B,AAbD,2BAGE,cAAe,AACX,UAAW,AACf,qBAAsB,AAEtB,kBAAmB,AACnB,iBAAkB,AAClB,sBAAuB,AACvB,qBAAsB,AACtB,oBAAqB,AACrB,wBAA0B,CAC3B,AAOD,wBACE,YAAa,AACb,eAAgB,AAChB,YAAa,AACb,eAAgB,AAChB,mBAAoB,AACpB,aAAe,CAChB",file:"chat-noir.vue",sourcesContent:["\ndiv.action[data-v-1cead8d4] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  margin: 0 2.5rem 1rem 0;\n}\ndiv.board[data-v-1cead8d4] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex: auto;\n      flex: auto;\n  -ms-flex-pack: center;\n      justify-content: center;\n  margin: 0 0 0 2rem;\n  user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  -webkit-user-select: none;\n}\n\n/*\ndiv.action > div {\n  margin: 0 3rem 0 0;\n}\n*/\nbutton[data-v-1cead8d4] {\n  height: 2rem;\n  min-width: 6rem;\n  border: none;\n  cursor: pointer;\n  background: #c6ff00;\n  margin: 0 1rem;\n}\n"],sourceRoot:""}])},44:function(t,e,n){var i=n(40);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(29)("8d6af27e",i,!0)},49:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"chatnoir"}},[n("h2",{domProps:{textContent:t._s(t.status)}}),t._v(" "),n("div",{staticClass:"board"},[n("svg",{attrs:{width:t.width,height:t.height},on:{contextmenu:function(t){t.preventDefault()}}},[n("g",{attrs:{transform:t.transform}},t._l(t.pixels,function(e,i){return n("aha-hexagon",{key:i,attrs:{cell:e,showCoord:t.showCoord,radius:t.radius,interval:t.interval}})}))])])])},staticRenderFns:[]}}});
//# sourceMappingURL=3.bf3d9cc0a22f49fce440.js.map